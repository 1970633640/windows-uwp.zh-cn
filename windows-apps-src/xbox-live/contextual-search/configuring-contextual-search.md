---
title: 配置上下文搜索
author: KevinAsgari
description: 了解如何配置上下文搜索以标记游戏剪辑和广播。
ms.assetid: 6cb2cb10-811a-4b20-9b9b-a3fc59a033c2
ms.author: kevinasg
ms.date: 04/04/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: xbox live, xbox, 游戏, uwp, windows 10, xbox one, 服务配置, 上下文搜索, 游戏剪辑, 广播
ms.localizationpriority: medium
ms.openlocfilehash: 79197dc7db3f15aba5fc9d494a5e8408878f0dba
ms.sourcegitcommit: 68fcac3288d5698a13dbcbd57f51b30592f24860
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/19/2018
ms.locfileid: "4058738"
---
# <a name="configuring-contextual-search"></a>配置上下文搜索

## <a name="configuration-info"></a>配置信息

### <a name="designing-your-data"></a>设计你的数据
在为上下文搜索配置游戏时，请务必考虑可以使你的游戏保持唯一的方面。  如果用户正在查找视频内容，第一时间会搜索什么？  数据的细化要达到什么程度？

上下文搜索同时支持内容筛选和分类功能，所以你的元数应该反映这些搜索构造以确保全面的覆盖。  好的经验法则是通过两个中心点考虑游戏数据：
1. 游戏状态 - 例如，  等级、人物、武器、地图、角色、关卡/故事点、DLC
2. 用户技能 - 例如， K/D 比、声誉、排名、疾速跑时间

第一个中心点非常适合筛选内容，第二个非常适合分类。  此外，根据呈现的内容类型，改变统计信息细化程度的级别非常重要。  对于广播，假设在任何给定时间活动广播的数量都是有限的，那么细化程度较低的数据将确保成功搜索的可能性更高。  对于游戏剪辑，此数量不断增加，所以更加细化的数据将确保更准确的结果。

很有可能你已经为 Xbox Live 功能（如“充分状态”或“主要统计信息”）创建了此数据，因此这是一个利用已经完成的工作的大好机会。

如果你使用统计信息来筛选内容，请了解，所有上下文搜索统计信息均可以随时用于查询。  你应该相应地设计你的事件以支持这一点。

例如，如果你使用 SinglePlayerMap 和 MultiplayerMap 这样的统计信息来筛选内容，玩家一次只会位于其中一个。  但是，这两个值可以随时在服务中用于查询。  当你设置一个时，同时清除另一个，这一点非常重要。  对于基于字符串的统计信息，空字符串非常适合（请确保不要将其作为一个选项加入你的 UI 配置）。

### <a name="configuring-a-stat-for-contextual-search"></a>配置上下文搜索的统计信息
如果设置了支持标记的事件和统计信息，为上下文搜索配置游戏就很容易了。  有关设置上下文搜索，如果你还不熟悉，请参阅其他现有的 XDP 或 Windows 开发人员中心文档。

![](../images/contextual_search/config02.png)

上图是在你单击 XDP 的主“服务配置”部分中的“上下文搜索”磁贴后出现的主页的示例。

即使这是你第一次访问此页面，也有可能会看到已经为“上下文搜索”配置的统计信息。  这是因为你所有的主要统计信息都会为“上下文搜索”自动设置。 你不需要将这些主要统计信息保留在你的配置中，但它们通常在分类中表现出色（已经为你完成了工作）。

目前，你可以为“上下文搜索”配置的统计信息实例的最大数为 10。

在此页上，每个统计信息通过以下方式表示：优先级 - 显示名称（统计信息实例名称）

每个统计信息将在下一部分更详细地阐述。

![](../images/contextual_search/config01.png)

上图是当你选择创建新的“上下文搜索”统计信息或编辑现有统计信息时将显示的屏幕。

若要为“上下文搜索”成功配置统计信息，请完成以下步骤：
1. 选择统计信息实例。

  ![](../images/contextual_search/config03.png)

  请注意，仅支持统计信息实例 - 不接受统计信息模板。  你还应该了解为统计信息实例 （已在 XDP 或 Windows 开发人员中心的统计数据部分配置） 设置的可见性。  仅标记为**开放**的统计信息将显示在第三方体验中。

2. 选择统计信息优先级。 这是指定这一统计信息相对于搜索体验/算法的其他方面的重要性的方式。  可接受值为 1-10（1 是最高）。  若要忽略，将此值保留为 0 或空白。
3. 添加显示名称。  这是向最终用户显示的可本地化的字符串。
4. 检查你是否将使用此统计信息来筛选或分类结果。  你可以在某些实例中检查这两项（如果统计信息值是一个数字 - 最好在定义范围内）。
5. 选择统计信息值的表示方式。  如果你有 3 个选项。
   * 原始值 - 统计信息按原样表示，没有范围要求。  这最适合用于分类。
   * 集 - 值映射到各个可本地化的字符串。  这最适合用于筛选。
   * 范围 - 值位于最小和最大范围内。  如果你想要对此数字进行筛选和分类，此类型很适合你。

#### <a name="explaining-sets"></a>解释集
如果你不熟悉集，这些集是将潜在的统计信息值映射到可能显示给最终用户的可本地化字符串的一种方法。  它们对于你想要用来筛选的上下文搜索统计信息非常重要。

{% raw %} 作为示例，我们假设我有一个称为 SinglePlayerMap 的整数统计信息。  向最终用户显示一组数字没有任何意义。  所以，我创建了一个映射集，像这样 ```{{0, “Blood Gulch”}, {1, “Lockout”}, {2, “Zanzibar”}}```。  用户将看到此字符串，但我们将此数字用作上下文搜索搜索查询的一部分。  你可以将整数或字符串映射到集中已本地化的字符串。
{% endraw %}

### <a name="updating-your-contextual-search-document"></a>更新上下文搜索文档
目前，你可以在上下文搜索文档中轻松更改统计信息，因为我们现在仅支持广播（这是易失数据）。  在我们开始支持游戏剪辑标记后（2015 年 9 月），如果你决定添加或删除统计信息，你将影响已建立索引的剪辑。  如果添加新的统计信息，只有在更改生效后创建的游戏剪辑和广播将在使用新统计信息的查询中标记和呈现。旧游戏剪辑无法通过此统计信息查询。如果从上下文搜索文档中删除了统计信息，附加到游戏剪辑中的旧统计信息将变为无用，且不会返回。
