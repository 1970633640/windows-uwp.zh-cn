---
title: “完整状态”配置
author: KevinAsgari
description: 了解如何配置 Xbox Live“完整状态”字符串。
ms.assetid: 7b08d46d-d3aa-42eb-93f2-ecd9338fccea
ms.author: kevinasg
ms.date: 04/04/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: xbox live, xbox, 游戏, uwp, windows 10, xbox one, 完整状态
ms.localizationpriority: medium
ms.openlocfilehash: 7accd2585b7d1822b99abf03e74a660cbf983cf9
ms.sourcegitcommit: 68fcac3288d5698a13dbcbd57f51b30592f24860
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/19/2018
ms.locfileid: "4053248"
---
# <a name="rich-presence-configuration"></a>“完整状态”配置

Xbox 开发人员门户 (XDP) 将有一个部分专门用于配置“完整状态”字符串。 在 XDP 中提供此功能前，必须使用手动配置。 手动配置意味着在开发者帐户管理器提供的电子表格模板中定义字符串，并将其发送到开发者帐户管理器以供引入环境。

-   **字符串**
-   **枚举**
-   **引入**
-   **游戏示例**
-   **为“完整状态”配置统计信息**
-   **枚举配置示例**
-   **字符串配置示例**


## <a name="strings"></a>字符串

对于“完整状态”字符串，必须定义字符串集。 应为每个字符串集提供一个友好名称用作标识符。 创建的每个字符串集必须包含一组字符串，并针对游戏将发布的区域将这些字符串相应本地化。 除了本地化的字符串外，还必须提供特定区域性字符串。 当针对未给定区域设置发出请求时，则使用此字符串。

每个字符串集还可以通过使用参数表示字符串来利用游戏内数据进一步增强这些字符串。 字符串集包含的参数可以与你希望的一样多，只要生成的字符串不超过字符数限制。 请参阅[“完整状态”字符串：策略和限制](rich-presence-strings-policies-and-limitations.md)了解更多详细信息。


## <a name="enumerations"></a>枚举

下方介绍的枚举通过来自数据平台的事件定义。


## <a name="statistics"></a>统计信息

你可以在“完整状态”字符串中使用数字统计值。 例如，在射击中，你可能希望“完整状态”字符串显示玩家到目前为止获得了多少技能。 此配置只需要显示参数应该由“杀人数”统计信息替换。 “杀人数”统计信息通过“公用架构事件”系统创建到数据平台，并且必须通过统计信息配置定义。 然后，当另一个用户读取字符串时，服务将运行并检索“杀人数”统计信息的最新值，以让字符串始终保持最新状态。


## <a name="state"></a>状态

你还可以选择使用在“完整状态”字符串中表示实际状态值的统计信息。 例如，在赛车游戏中，你可以使用“完整状态”字符串来显示玩家目前正在驾驶的汽车，或玩家所在的比赛地图或赛道。 配置状态信息有两个步骤：

1.  对于状态信息，为所有游戏内字符串定义枚举。 例如，如果你在游戏中有五个地图，并且希望这些地图成为“完整状态”字符串的一部分，那么这五个地图也需要枚举为本地化字符串。
2.  将枚举链接到统计信息。 在这里，服务同样会通过查找统计信息值从数据平台检索最新值。 然后确定统计信息要转为哪个枚举值。


## <a name="ingestion"></a>引入

在完成电子表格后，将其发送到开发者帐户管理器以供引入。 “完整状态”团队将检查你的配置，并确保已正确配置，然后将其引入服务。


## <a name="example-game"></a>游戏示例

对于示例的其余部分，我们来假定我正在开发最新的踢桶游戏。 在我的游戏中有许多不同类型的桶，如木桶、银桶和金桶。 我决定为每个被踢的桶类型创建统计信息。 我的游戏中还有其他踢桶位置，如山脉、沙漠和海滩。 桶被踢之后将碎掉，因此你必须始终搜索更多桶。 有些桶需要你有特殊装备（你需要一双足够结实能够承受踢力的靴子）才能够成功踢桶。 此游戏还包括多人游戏模式，所以如果有足够多的玩家同时尝试踢桶，那么你便不需要相应的靴子。

我们来看看这个游戏的“完整状态”字符串配置看起来是什么样子。


## <a name="configuring-statistics-for-rich-presence"></a>为“完整状态”配置统计信息

若要在你的“完整状态”字符串中使用数据平台生成的统计信息，服务需要知道统计信息的名称。 你必须在要求指定字符串所用统计信息的电子表格模板中包括此信息。


## <a name="enumeration-configuration-example"></a>枚举配置示例

下面是定义几个枚举的示例。 首先，我们为游戏中的地图创建枚举。 游戏有三个地图，它们会获得一个友好名称，以便我们可以轻松引用。 然后针对每个区域设置，我们为该地图名称创建本地化字符串。 请注意，有一个整体默认本地化字符串以及一个特定区域性本地化字符串。

然后我们在游戏中看到了武器。 我的游戏有三个武器，它们具有友好名称和本地化字符串。 我们对所有枚举执行上述操作。

枚举 | 相关统计信息 | 友好名称 | 区域设置 | 字符串
----------- | ----------------- | ------------- | ------ | ----
地图 | CurrentMap | Map_Mountains | 默认 | 山脉
 |  |  |  | zh | 山脉
 |  |  |  | zh-CN | 山脉
 |  |  |  | en-GB | Mountains
 |  |  |  |  de | Gebirge
 | |  |  | 等 |
 | |  | Map_Desert | 默认 | 沙漠
 |  ||  |  zh | 沙漠
 |  ||  |  zh-CN | 沙漠
 |  ||  |   en-GB | Desert
 |  ||  |  de | Wuste
 |  ||  |  等 |
| |  |  Map_Beach | 默认 | 海滩
 ||    |  | zh | 海滩
 ||    |  | zh-CN | 海滩
 ||    |  | en-GB | Beach
 ||    |  | de | Strand
 | |   |  | 等 |
靴子 | CurrentWeapon | Boot_Light | 默认 | 轻薄
 |  ||  |  zh | 轻薄
 |  ||  |   zh-CN | 轻薄
 |  ||  |   en-GB | Light
 |  ||  |   de | Leicht
 |  ||  |   等  |
 |  | |  Boot_Medium | 默认 | 中等
 |  |  |  | zh | 中等
 |  |  |  | zh-CN | 中等
 |  |  |  | en-GB | Medium
 |  |  |  | de | Mittel
 |  |  |  | 等 |
 |  | |  Boot_Strong | 默认 | 坚固
 |  |  |  | zh | 坚固
 |  |  |  | zh-CN | 坚固
 |  |  |  | en-GB | Strong
 |  |  |  | de | Stark
 |  ||  | 其他

## <a name="string-configuration-example"></a>字符串配置示例

既然已经定义了枚举和统计信息，你可以创建字符串了。

在下方的示例表中，第一列是友好名称，帮助引用一个又一个字符串集。 在此示例中，我们决定为第一个字符串集使用字符串 "playingMap"，第二个字符串集使用 "totalKicked"，第三个字符串集使用 "multiplayer"。

后面的两列一同加入。 这些是“完整状态”字符串的区域设置字符串对。 在第一个示例中，我们想要使用英语字符串 "Playing on {0}"。 {0} 令牌将替换为值。 我们随后将字符串本地化为其他区域的值。 与枚举一样，必须存在默认字符串和特定区域性字符串，后者用于用户使用的区域设置未指定区域设置字符串对的情况。 用于枚举的区域设置必须与字符串的区域设置相同。

最后一列是用于填充“完整状态”字符串中空白的参数。 如果你希望状态服务查找统计信息服务中的参数值，则必须使用状态名称来引用此处的参数。 在字符串中使用统计信息可让你设置你的字符串，从而不必再担心它。 如果你的字符串中有地图名称，并且你使用 CurrentMap 统计信息来填充空白，那么当游戏中的玩家在地图之间切换时，服务将相应地更新你的字符串。 如果你不在“完整状态”字符串中使用统计信息，则无法指定任何参数。

在下面的示例中，我们想要在第一个字符串中使用统计信息生成的当前地图，然后在第二个字符串中使用 BucketsKicked 统计信息。 请注意，第三个示例不含任何参数。 字符串由其自己定义。 不引用任何统计信息。

友好名称 | 区域设置 | 字符串 | 参数
--- | --- | --- | ---
playingMap | 默认值 | Playing on map:{0} | CurrentMap
 |  | en | Playing on map:{0} |
 |  | en-US | Playing on map:{0} |
 |  | en-GB | Playing on map:{0} |
 |  | de | Spielt auf Karte: {0} |
 |  | 其他 | |
totalKicked | 默认值 | Kicked {0} Buckets! | BucketsKicked
 |  | en | Kicked {0} Buckets! |
 |  | en-US | Kicked {0} Buckets! |
 |  | en-GB | Kicked {0} Buckets! |
 |  | de | {0} Eimer getreten! |
 |  | 其他 | |
多人游戏 | 默认 | 玩多人游戏 |
 |  | zh | 玩多人游戏 |
 |  | zh-CN | 玩多人游戏 |
 |  | en-GB | Playing multiplayer |
 |  | de | Spielt Mehrspieler |
 |  | 等 | 

对于可以创建多少个字符串没有限制，但必须至少为标题创建一个字符串。

"BucketsKicked" 只是一个可替换你的字符串的数字。 "CurrentMap" 是其中的字符串来自枚举的统计信息的示例。 当你的标题将“完整状态”设置为这些字符串之一时，我们使用此配置来了解需要哪些参数。
