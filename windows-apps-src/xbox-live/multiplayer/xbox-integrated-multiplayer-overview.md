---
title: "Xbox 集成多人游戏概述"
author: KevinAsgari
description: "了解 Xbox 集成多人游戏 (XIM)，这是一个针对 Xbox Live 游戏的一体化多人游戏/网络/聊天解决方案。"
ms.assetid: edbb28e6-1b6c-4f12-a9c6-fa8961de99a8
ms.author: kevinasg
ms.date: 04-04-2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: "Xbox live, xbox, 游戏, uwp, windows 10, xbox one"
ms.openlocfilehash: 17e50c808a95ee3cab2f0d35342341d425534ab3
ms.sourcegitcommit: 90fbdc0e25e0dff40c571d6687143dd7e16ab8a8
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/06/2017
---
# <a name="xbox-integrated-multiplayer-overview"></a>Xbox 集成多人游戏概述

 Xbox 集成多人游戏 (XIM) 是一个独立式界面，可通过 Xbox Live 服务的功能向游戏轻松添加多人游戏实时网络和聊天通信。 它围绕着下面几个关键概念：

 - **XIM 网络** - 对一组参与特定多人游戏体验的互连用户，以及描述此集合基本状态的逻辑表示形式。 参与者一次只能在一个 XIM 网络中，但可从一个概念 XIM 网络无缝移动到另一个概念 XIM 网络。
 - `xim_player` - 一个表示在本地或远程设备登录并参与 XIM 网络的个人用户的对象。 加入、离开然后重新加入同一个 XIM 网络的单个物理用户被视为是两个单独的玩家实例。
 - `xim_authority` - 一个表示单个实体的对象，该实体具有管理 XIM 网络中针对所有参与者的特定于游戏状态一致视图的权限和责任。 使用此对象是可选的。 在此软件版本中，其功能目前尚不可用。
 - `xim_state_change` - 一个表示发送给本地设备的通知的结构，该通知与 XIM 网络的一些异步更改有关。
 - `xim::start/finish_processing_state_changes` - 在每个 UI 框架由应用调用的方法对，此方法对会执行异步操作、检索采用 `xim_state_change` 结构格式处理的结果，然后在完成时释放关联的资源。
 - **匹配** - 发现有相似兴趣或技能水平的其他远程玩家，无需现有社交关系即可参与 XIM 网络的可选过程。

概括而言，应用使用库在本地设备上配置一组要移动到 XIM 网络中作为新玩家的用户。 远程设备上的应用实例会和其各自的用户执行相同的操作，每个持续的开始 + 结束处理状态都会在每个 UI 框架更改，并为每个参与实例提供介绍加入 XIM 网络的本地和远程 `xim_player` 的 `xim_state_change` 更新。

在 XIM 网络中，应用可以发送其各自特定于游戏的数据消息，例如，虚拟形象移动更新。 这些消息可能会面向其他玩家，或面向自动选择以驻留在其中一个参与设备上的 `xim_authority`（基于最好的网络质量、稳定性、玩家荣誉和其他因素），以便此 `xim_authority` 设备上的应用可以再将消息向外发送给玩家，通常会将其合并以提高网络效率并对冲突进行仲裁。 所有接收的消息都会作为指示预期源和本地目标的 `xim_state_change` 传递给应用。

在隐私设置和应用配置允许的所有玩家中，还会自动提供语音和文本聊天通信。 对于已启用语音到文本或文本到语音转换的玩家，XIM 将以透明方式执行此转换，以分别传递表示传入语音音频的聊天文本消息，并为传出聊天文本消息播放合成语音文本。

当玩家停止参与 XIM 网络（正常停止或由于网络连接问题停止）时，会向指示 `xim_player` 已离开的所有应用实例提供 `xim_state_change` 更新。 如果选择此设备作为离开的 `xim_authority`，则会用同样的方式告知应用实例，机构已开始移动并要开始“协调”任意特定于游戏的状态，方法是：通过选择性地向替换 `xim_authority` 提供数据缓冲区来实现重新同步。 新机构可以根据需要解释所有玩家中的协调数据，并因此重新向所有玩家提供“协调的”数据缓冲区，以完成机构移动和重新同步过程。 同样的基本协调过程还会提供给新参与的设备，以便当其玩家加入 XIM 网络时，机构可以方便地向其提供当前的权威游戏状态，而不需要额外的代码。 注意，此软件版本中目前不提供机构状态更改。

应用可以通过多种方法确定要参与的 XIM 网络。 通常，应用会通过将本地用户自动移动到可用于用户好友的新网络中启动，在新网络中，本地用户可以发送邀请，或以可加入活动形式（例如，通过玩家卡）发现其 XIM 网络。 当这些通过社交方式发现的用户就绪后，应用可以启动 Xbox Live“匹配”进程，并将所有玩家移动到新的 XIM 网络中，此网络还包括其他“匹配的”远程玩家，可根据需要填写团队/对手列表。 然后，当此多人游戏体验完成后，应用实例可以将其本地玩家（也可以选择原始的预匹配远程玩家）重新移动到新的专用 XIM 网络中，或移动到通过匹配发现的其他随机 XIM 网络中。 语音和文本聊天在整个过程中保持可用。 这种将玩家在 XIM 网络间移动的便利性是 API 的核心，反映了对优质、高度社交游戏体验的现代期望。

要开始，请参阅[使用 XIM](xbox-integrated-multiplayer/using-xim.md)。

## <a name="xims-relationship-to-other-modules"></a>XIM 与其他模块之间的关系

XIM 旨在为具有多人游戏基本需求的游戏提供便利、一体化的界面。 它将多个模块（特别是 Xbox 服务 API (XSAPI) `multiplayer_manager` 模块、`Microsoft::Xbox::GameChat` 库和 `Windows::Networking::XboxLive` 安全多人游戏网络）的功能封装为一个单一简化的 API。 当生成不需要绝对的最大灵活性或控制的多人游戏时，这会减少典型的所涉及代码、任务和概念的数量。 但是，要求与 XIM 的简化假定不一致的应用可能想要改为直接使用这些组件。

虽然 XIM 旨在通过基础组件消除管理多人游戏会话目录 (MPSD) 会话文档或网络传输等内容的需要，但它不会阻止将同时/并行使用两者作为单独玩家名单或通信网格的一部分。 在这种情况下，应用要负责确保 XIM 与其自身的机制之间的协作式网络资源使用。 XIM 目前支持“带外保留”，可轻松地用作专门的聊天解决方案，这种解决方案只由外部输入驱动用户列表。

Xbox Live 提供的很多其他功能，对于多人游戏而言非常有价值，但不太直接涉及设置多人游戏聊天和网络通信，因此，此模块不会包装这些功能。 建议应用查看 Xbox 服务 API (XSAPI)，以获得玩家反馈、成就、排行榜、存储等。


## <a name="using-xim-as-a-dedicated-chat-solution-via-out-of-band-reservations"></a>通过带外保留将 XIM 用作专门的聊天解决方案

大多数应用会使用 XIM 来处理聚集玩家的每个方面。 毕竟，专注于组装支持端到端常见多人游戏场景所需的功能，这就是称其为“Xbox 集成多人游戏”的原因。 但是，有些使用专门的 Internet 服务器实现其各自的网络解决方案的应用还想拥有建立可靠、低延迟、低成本对等聊天通信的优势。 XIM 认识到了这一需要，目前可支持扩展模式利用其简化的对等通信，以增强 XIM API 之外的外部玩家管理。

> 有关通过带外保留使用 XIM 的详细文档，请参阅 [XIM 保留](xbox-integrated-multiplayer/xim-reservations.md)。
