---
ms.assetid: 69E05E56-B5F0-4D4C-A1FF-B6EAFF5D0E28
description: 在提交过程中，你可以配置你希望看到的广告中介行为。 稍后你可以调整它，而无需进行代码更改或提交新程序包。
title: 提交应用和配置广告中介
---

# 提交应用和配置广告中介


\[ 已针对 Windows 10 上的 UWP 应用更新。 有关 Windows 8.x 文章，请参阅[存档](http://go.microsoft.com/fwlink/p/?linkid=619132) \]


在生成应用以包括所有可能要使用的广告网络并对其进行测试以确保一切正常工作之后，你就可以提交该应用了。 在提交过程中，你可以配置你希望看到的广告中介行为。 稍后你可以调整它，而无需进行代码更改或提交新程序包。

## 为应用程序包创建基线配置


当你上载程序包时，开发人员中心将自动检测到你在使用广告中介并标识你在使用哪些广告网络。 在**“程序包”**页面上，你将看到**“配置广告中介”**链接。 单击此链接以转到[使用广告盈利](https://msdn.microsoft.com/library/windows/apps/mt170658)页面，你可以在其中的**“Windows 广告中介”**部分配置中介逻辑。 有关此页面上其他部分的详细信息，请参阅“使用广告盈利”。

第一次为你的应用配置广告中介设置时，你将创建基线配置。 设置完该配置后，你可以添加特定于市场的配置以充分利用不同市场中的特定广告网络强度。 如果你选择不在提交应用之前配置广告中介设置，则开发人员中心将自动应用[默认设置](#default-ad-mediation-settings)，你可以[在以后修改这些设置](#optimize-ad-mediation-after-the-app-has-been-published)。

以下步骤描述了如何在“使用广告盈利”****页面的“Windows 广告中介”****部分创建基线配置。

1.  在“中介配置目标”****下，确保要配置的应用程序包处于选中状态。
2.  在**“目标”**下，确保**“基线”**处于选中状态。
3.  在**“刷新率”**下，选择中介周期的长度（新广告应该显示的频率）。 持续时间必须在 30 到 120 秒之间。
    **注意** 如果你已在你的任意广告网络门户中配置刷新率，请确保在此处设置相同的刷新率。
4.  接下来，**“Windows 广告中介”**部分列出了应用使用的所有广告网络，并提供两种不同的指定应用使用每个广告网络频率的方法。 选择“中介类型”****下拉列表中的其中一个选项：

    -   **按权重排序**。 选择此选项以将百分比值应用到每个指定为应用所使用的频率的广告网络。 你为所有广告网络设置的总百分比加起来必须正好为 100%。 有关详细信息，请参阅[按权重对广告网络进行排序](#order-ad-networks-by-weight)。
    -   **按等级排序**。 选择此选项，将等级编号（由 1 到 *n*）应用到每个广告网络，该编号指定应用使用每个广告网络的频率。 有关详细信息，请参阅[按等级对广告网络进行排序](#order-ad-networkds-by-rank)。

    开发人员中心将自动应用[默认设置](#default-ad-mediation-settings)，该设置指定你的应用应使用每个广告网络的频率。

5.  在应用使用的广告网络列表中，单击每个广告网络提供程序的下拉箭头、查看每个网络的所需参数，然后输入该所需参数。 有关这些参数的列表，请参阅[选择和管理广告网络](select-and-manage-your-ad-networks.md)。

    在每个网络的参数扩展列表中，你可以视情况使用**“超时”**字段指定在从该广告网络请求某个广告之后，在禁用该请求并改为向其他网络发出请求之前，广告中介应等待的秒数（从 2 到 120）。 如果你已经[在代码中指定了该值](add-and-use-the-ad-mediator-control.md#set-timeouts)，你在代码中指定的值将覆盖在此处指定的值。

    如果你使用的是 Microsoft Advertising，请注意以下内容：

    -   **Microsoft Advertising** 的参数将根据应用包的内容进行填写。 你可以根据需要为“Microsoft Advertising”****指定自己的“应用程序 Id”****和“广告单位 Id”****的值。
    -   除**“Microsoft Advertising”**外，还有**“Microsoft Advertising 自家广告”**这一行。 自家广告提供了一种在你的其他应用中免费推广你的某个应用的方式。 虽然自家广告是免费的，但是你的自家广告配额来自与其他广告网络相同的池。 因此，如果你将任何广告请求分配给“Microsoft Advertising 自家广告”****，即表示你选择将占总广告配额的该百分比用于自家广告。 当你向自家广告分配广告请求时，还必须为至少一个已注册到你的开发人员帐户的其他应用创建自家广告活动。 有关详细信息，请参阅[关于自家广告](https://msdn.microsoft.com/library/windows/apps/mt148566)。

6.  单击**“保存”**以保存基线配置。

### 按权重对广告网络进行排序

在“中介类型”****下拉菜单中选择此选项，以指定可以指定应用使用每个广告网络的频率的百分比值。 你为所有广告网络设置的总百分比加起来必须正好为 100%。

若要使请求自动均匀分布在你的所有网络上，请单击“使广告请求平均分布在你的所有活动广告网络上”****。 若要使请求均匀分布，请使用滑块控件指示你的应用应该使用每个广告网络的频率。 你为所有广告网络设置的总百分比加起来必须正好为 100%。 在拖动滑块控件时，你拥有多种选择：

-   如果你将滑块拖动到某个数字，该数字指示在中介周期中此广告网络将作为应用的第一个选择而被调用的时间的百分比。
-   如果你将滑块拖动到**备份**，即指示仅当任何具有指定百分比的广告网络都无法提供广告时，才应该调用此广告网络。 这等效于将百分比设置为 0%。
-   如果你将滑块拖动到“非活动”****，即指示永远不会调用此广告网络。 该广告网络的程序集将保留在程序包中，但是中介将不会尝试调用它们。 你可以在特定于市场的配置中设置此选项，以排除已知在特定市场中表现较差或不支持特定市场的广告网络。
-   当调整某个广告网络的百分比时，已选择除**备份**外的其他值的其他任何滑块控件都将自动调整，以便总分发量相加的结果为 100%。 如果你为广告网络选中“锁定”****复选框，则该广告网络将在其当前选定值上保持不变。 然后，你可以调整其他广告网络的值，而不会影响锁定的广告网络的值

### 按等级对广告网络进行排序

在**“中介类型”**下拉菜单中选择此选项，将等级编号（由 1 到 *n*）应用到每个广告网络，该编号指定应用使用每个广告网络的频率。

如果你清除某个广告网络的**“活动”**复选框，这表示此广告网络将永远不受调用。 该广告网络的程序集将保留在程序包中，但是中介将不会尝试调用它们。 你可以在特定于市场的配置中设置此选项，以排除已知在特定市场中表现较差或不支持特定市场的广告网络。

### 默认广告中介设置

默认情况下，开发人员中心将在“使用广告盈利”****页面上，将以下广告中介设置应用到你的应用。 如果你选择不在提交应用之前配置广告中介，则还会应用这些相同的默认值。

-   如果你的应用使用 Microsoft Advertising，则将 **Microsoft Advertising** 设置为 100（如果你选择**“按权重排序”**）或 1（如果你选择**“按等级排序”**），并将其他所有广告网络都设置为“非活动”。
-   如果你的应用不使用 Microsoft Advertising，则将所有广告网络都设置为“非活动”。

## 创建新的目标配置


为你的应用创建基线配置后，你可以创建要在特定市场中使用的其他配置。 这些新配置将从基线配置继承其初始设置，但你可以针对为应用支持的特定市场调整详细信息。

创建新的目标配置：

1.  在“目标”****下，选择你要为其创建新配置的市场。
2.  按需更新刷新率和广告请求分发信息。
3.  单击“保存”****，保存新配置。

## 在发布应用后优化广告中介


如果你希望调整特定应用的广告中介，可以随时执行此操作，而无需重新提交该应用。 如果你已将广告网络添加到应用中，但是你之前尚未为该应用设置帐户，或者你发现一个广告网络无法在特定市场中可靠地填充广告，则这很有用。 你可以对基线配置以及特定于市场的配置进行更改。 如果需要，你还可以添加或删除特定于市场的配置。

若要返回到你的应用的应用中介设置，请执行以下任一操作：

-   从仪表板上你的帐户概述页面中，在“广告中介”****部分下单击你的应用。
-   从仪表板上你的应用的概述页面中，展开“盈利”****并单击“使用广告盈利”****。

## 广告中介设置和应用更新


当你提交应用更新时，如果满足以下条件，你的应用的现有广告中介配置信息会自动应用到已更新的程序包：

-   “AdMediatorControl”****控件数与以前应用程序包中的控件数相同，并且所有这些控件都与以前的应用程序包具有相同的 ID。
-   广告网络提供商列表与以前的应用程序包相同。

如果不符合以下任一条件，必须为你的应用重新创建基线配置以及任何适用的特定于市场的目标配置。

**注意** **“AdMediatorControl”**的 ID 将在你将该控件拖动到应用设计图面中时生成。 除非你删除该控件，然后将一个新控件拖动到相同的设计图面中替换它，否则此 ID 不会更改。

 

## 在统一的开发人员中心仪表板上查看广告中介报告


若要查看中介报告，请转到开发人员中心中的**“分析”**部分，并单击**“广告中介”**。 有关此报告的详细信息，请参阅[广告中介报告](https://msdn.microsoft.com/library/windows/apps/mt148521)。

## 示例方案


你可以采用多种方法配置广告网络，以支持不同的目标和方案。 下面的示例介绍当你已包含三个广告网络时可以如何使用**“按权重排序”**配置你的广告中介。 我们将使用 Microsoft Advertising、Inneractive 和 AdDuplex 作为我们以下的示例网络。

### 示例 1

你希望在开始优化前查明所有网络的填充率和千次网页展示收入 (eCPM)。

首先，请将每个网络设置为平均分布中介流量。 你可以稍后查看每个广告网络的报告以帮助确定每个市场的最高性能广告网络。

几天或几周后，你将要在每个广告网络门户中检查填充率和 eCPM。 这将帮助你确定每个市场的最佳广告网络。 然后，你可以对特定市场（或整体市场）进行调整，而无需提交新程序包。

### 示例 2

你希望尽可能首先使用 Microsoft Advertising。 如果 Microsoft Advertising 无法提供广告，你乐意使用你的任何其他广告网络作为备用广告，这些广告网络之间不存在优先级。

| 广告网络            | 配置 |
|-----------------------|---------------|
| Microsoft             | 100%          |
| Inneractive           | 备份        |
| AdDuplex              | 备份        |

### 示例 3

你通常希望首先使用 Microsoft Advertising。 如果 Microsoft Advertising 无法提供广告，你希望确保在 AdDuplex 之前先调用 Inneractive。

| 广告网络            | 配置 |
|-----------------------|---------------|
| Microsoft             | 90%           |
| Inneractive           | 10%           |
| AdDuplex              | 备份        |

### 示例 4

你希望均等地使用 Microsoft Advertising 和 Inneractive，以便应用中的广告种类比总是先调用一个网络时所看到的广告种类更多。 如果不提供任何广告网络，你将使用 AdDuplex 作为备份。

| 广告网络            | 配置 |
|-----------------------|---------------|
| Microsoft             | 50%           |
| Inneractive           | 50%           |
| AdDuplex              | 备份        |


## 相关主题

* [选择和管理广告网络](select-and-manage-your-ad-networks.md)
* [添加和使用广告中介控件](add-and-use-the-ad-mediator-control.md)
* [测试广告中介实现](test-your-ad-mediation-implementation.md)
* [广告中介疑难解答](troubleshoot-ad-mediation.md)
 

 


<!--HONumber=Mar16_HO5-->


