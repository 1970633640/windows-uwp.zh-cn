---
title: 用户活动的最佳做法
description: 本指南概述了有关创建和更新用户活动的建议的做法。
keywords: 用户活动, 时间线, cortana 从你离开的位置继续, cortana 从我离开的位置继续, project rome
ms.date: 08/23/2018
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: e98f5d73cf2d1afb26a823ed417c8980d118485c
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/06/2019
ms.locfileid: "57589902"
---
# <a name="user-activities-best-practices"></a>用户活动的最佳做法

本指南概述了有关创建和更新用户活动的建议的做法。 Windows 上的用户活动功能的概述，请参阅[甚至在设备上继续用户活动](https://docs.microsoft.com/windows/uwp/launch-resume/useractivities)。 或者，请参阅[用户的活动部分](https://docs.microsoft.com/windows/project-rome/user-activities/)项目罗马为其他开发平台上的活动实现。

## <a name="when-to-create-or-update-user-activities"></a>何时创建或更新用户活动

由于每个应用程序不同，它由每个开发人员，以确定将应用程序中的操作映射到用户活动的最佳方式。 将 Cortana 和时间线，侧重于不断增加用户的工作效率和效率，让他们回到的内容记录中的天数中展示你的用户活动。

**一般指导原则**

* **记录一组相关的用户操作的单个活动。** 这一点尤为重要音乐的播放列表或电视节目： 可以按固定间隔，以反映用户的进度更新单个活动。 在这种情况下，您必须具有多个表示跨多个天或数周的 engagement 的时间段的历史记录项的单个用户活动。 这同样适用于基于文档的活动用户在其进行您的应用程序中逐步进度。
* **在云中存储用户数据。** 如果你想要支持跨设备活动，您将需要确保所需重新参与此活动的内容存储到的云位置。 特定于设备的活动将显示在时间线在设备上创建活动的但可能不会显示在其他设备上。
* **不要创建活动的用户将不需要恢复的操作。** 如果你的应用程序用于完成不会持久保留状态的简单的一次性操作，可能不需要创建用户活动。
* **不要创建其他用户已完成操作所需的活动。** 如果外部帐户将用户发送一条消息或@-mentions它们在应用中，您不应创建活动的。 此类型的操作更好地提供服务的操作中心通知。
  * 协作应用场景是个例外：如果多个用户正在努力在一起 （如 Word 文档） 的同一个活动，将在其中的另一个用户已更改后你的用户的情况。 在这种情况下，你可能想要更新现有的活动，以反映对文档所做的更改。 这通常需要更新现有的用户活动内容数据而无需创建新的历史记录项。

**为特定类型的应用的指导原则**

虽然每个应用程序不同，大多数应用程序将划分为以下的交互模式之一。
* **基于文档的应用**— 通过一个或多个专用于反映将使用的时间段的历史记录项创建每个文档，一个活动。 请务必对文档进行了更改更新您的活动。
* **游戏**— 创建一个活动，以便每个游戏保存或世界。 如果您的游戏支持单个序列的级别，您可以重新发布同一个活动随着时间推移，尽管你可能想要更新内容的数据，以显示最新的进度或成就。
* **实用工具应用**— 如果没有任何用户将需要保留和恢复在应用内，不需要使用用户活动。 一个很好示例是一个类似计算器的简单应用。
* **业务线应用**-用于管理简单的任务或工作流存在很多应用程序。 创建一个活动，以便通过您的应用程序访问每个单独的工作流 （例如，支出报告每个将单独的活动，以便用户可以单击以查看特定报表已批准的活动）。
* **媒体播放应用程序**— 创建每个逻辑分组的内容 （如播放列表、 程序或独立的内容） 的一个活动。 面向应用开发人员的基础问题是每个段内容 （电视剧、 歌曲） 是否算作独立内容或集合的一部分。 作为一般规则，如果用户选择播放集合或顺序内容作为一个整体集合是活动。 如果他们选择播放一段内容，内容的一种是活动。 请参阅以下更多具体指导原则。
  * **音乐：唱片集/艺术家/流派**-如果用户选择相册、 艺术家或流派和命中**播放**，该集合是活动; 请不要编写每首歌曲的单独的活动。 对于短的集合，如是一个唱片集或播放按随机顺序的集合，您可能不需要更新以反映用户的当前位置的活动。 用于如唱片集或播放列表的长时间顺序播放，录制你唱片集内的位置可能会有用。
  * **音乐： 智能播放列表**— 按随机顺序播放音乐的应用程序应记录该播放列表的单个活动。 如果用户在第二次播放播放列表，您需要为同一活动中创建其他历史记录。 因为顺序是随机，录制的播放列表中的用户的当前位置不需要。
  * **电视系列**— 如果您的应用程序配置为播放下一集中，当前完成后，您应编写电视系列的单个活动。 在多个查看会话播放各种事件时，将更新以反映当前的位置在系列中，您的活动，将创建多个历史记录。
  * **电影**— 电影是一段内容，因此应具有其自己的历史记录记录。 如果用户停止观看电影中途，最好以记录其位置。 当他们希望在将来继续时，活动可以恢复的电影他们离开的位置，或甚至询问用户是否要继续或从头开始。

## <a name="user-activity-design"></a>用户活动设计

用户活动的三个组件组成： 激活 URI、 可视化数据和内容元数据。
* 激活 URI 是一个 URI，可以传递给应用程序或体验以便恢复应用程序使用特定的上下文。 通常情况下，这些链接将带窗体的协议处理程序的方案 (例如，"我的 app://page2?action=edit")。 它是由开发人员确定自己的应用程序将如何处理 URI 参数。 请参阅[处理 URI 激活](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation)有关详细信息。
* 可视化数据，包含一组必需和可选属性 (例如： 标题、 说明或自适应卡元素)，允许用户直观地识别活动。 有关如何为您的活动创建自适应卡片视觉对象的指南，请参阅下文。
* 内容的元数据是可用于分组并检索在特定上下文下的活动的 JSON 数据。 这通常情况下，采用的形式 http://schema.org数据。 有关填充此数据的指导原则，请参阅下文。

### <a name="adaptive-card-design-guidelines"></a>自适应卡设计指南

在时间线中显示的活动，会显示使用[自适应卡框架](https://docs.microsoft.com/adaptive-cards/)。 如果开发人员不会为每个活动提供自适应卡，时间线将自动创建基于应用程序名称/图标、 所需的标题字段和可选说明字段的简单卡。 

建议以提供自定义卡使用简单的自适应卡 JSON 架构的应用程序开发人员。 请参阅[自适应卡文档](https://docs.microsoft.com/adaptive-cards/authoring-cards/getting-started)有关如何构建自适应卡对象的技术说明。 请参阅下面的设计中的用户活动的自适应卡的指南。
* 使用图像
  * 对于每个活动，如有可能使用唯一的映像。 你的应用程序名称和图标会自动显示活动的卡; 旁边更多映像将有助于用户查找他们所查找的活动。
  * 映像不应包含文本的用户预期需要读取。 此文本将不提供给具有辅助功能需求的用户，不能搜索。
  * 如果映像不包含文本，并且可以裁剪成比例为 2:1 有关，应该使用它作为背景图像。 这会导致以粗体显示的活动卡中，这将在时间线中脱颖而出。 图像将略暗，并确保文本保持可见的卡上，建议仅为较小的文本可能会变得难以阅读这种情况下，使用活动名称。
  * 如果不能为 2:1 裁剪图像，应将其放在活动卡内。  
    * 如果纵横比为正方形、 纵向，锚定的无边距卡右侧图像。
    * 如果纵横比为横向，定位到卡的右上角的映像。
* 每个活动需要提供活动名称，应始终显示。
  * 此名称应显示在使用大型的粗体文本选项卡的左上角。 非常重要，因为这是唯一的名称是易于识别，一部分用户将看到该活动时 Cortana 方案中所示。 时间线中显示相同的名称，使用户更轻松地浏览大量活动。
* 您的应用程序中的活动的所有使用相同的视觉样式，以便用户可以轻松地找到你的应用的活动时间线中。
  * 例如，活动应都使用相同的背景色。
* 尽量少使用的补充文本信息。 
  * 避免在卡中填充文本，并仅使用有助于用户查找正确的活动或反映状态信息 （例如在特定任务的当前进度） 的补充信息。

### <a name="content-metadata-guidelines"></a>内容元数据指南

用户活动还可以包含 Windows 和 Cortana 使用对活动进行分类并生成推断的内容元数据。 （如果用户要购买特定产品跨不同的应用程序和网站），则可以围绕某个特定主题，如位置 （如果用户正在研究休假）、 对象 （如果用户正在研究的内容） 或操作组合活动。 它是表示名词和动词在活动中所涉及的一个好办法。 

在下面的示例中，JSON，遵循标准的内容的元数据[Schema.org](https://schema.org/)，表示该方案："John 扮演愤怒的小鸟与 Steve。"

```json
// John played angry birds with Steve.
{
  "@context": "http://schema.org",
  "@type": "PlayAction",
  "agent": {
    "@type": "Person",
    "name": "John"
  },
  "object": {
    "@type": "MobileApplication",
    "name": "Angry Birds."
  },
  "participant": {
    "@type": "Person",
    "name": "Steve"
  }
}
```

## <a name="key-apis"></a>关键 API

* [UserActivities 命名空间](https://docs.microsoft.com/uwp/api/windows.applicationmodel.useractivities)

## <a name="related-topics"></a>相关主题

* [用户活动 (项目罗马 docs)](https://docs.microsoft.com/windows/project-rome/user-activities/)
* [自适应卡](https://docs.microsoft.com/adaptive-cards/)
* [自适应卡可视化工具示例](https://adaptivecards.io/)
* [处理 URI 激活](https://docs.microsoft.com/windows/uwp/launch-resume/handle-uri-activation)
* [使用 Microsoft Graph、 活动源，和自适应卡任何平台上的客户参与](https://channel9.msdn.com/Events/Connect/2017/B111)
* [Microsoft Graph](https://developer.microsoft.com/graph/)
